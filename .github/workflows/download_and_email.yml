name: 'æ‰‹åŠ¨å‘é€é‚®ä»¶ (å¸¦é™„ä»¶)'

on:
  workflow_dispatch:
    inputs:
      email_subject:
        description: 'ğŸ“ é‚®ä»¶ä¸»é¢˜'
        required: true
        default: 'é™„ä»¶é‚®ä»¶é€šçŸ¥'
      email_body:
        description: 'ğŸ’¬ é‚®ä»¶å†…å®¹'
        required: true
        default: 'è¯·æŸ¥æ”¶é™„ä»¶ã€‚'
      recipient_email:
        description: 'ğŸ“§ æ”¶ä»¶äººé‚®ç®±åœ°å€'
        required: true
        default: '275559292@qq.com' 
      attachment_path: # æ–°å¢é™„ä»¶è·¯å¾„è¾“å…¥
        description: 'ğŸ“ é™„ä»¶æ–‡ä»¶è·¯å¾„ (Runnerå·¥ä½œåŒºå†…çš„æ–‡ä»¶)'
        required: false # é™„ä»¶ä¸æ˜¯å¿…é¡»çš„
        default: './README.md' # é»˜è®¤ä½¿ç”¨ä»“åº“ä¸­å¿…æœ‰çš„æ–‡ä»¶ä½œä¸ºç¤ºä¾‹

jobs:
  send_message:
    name: 'å‘é€é‚®ä»¶ä»»åŠ¡'
    runs-on: ubuntu-latest

    # æ­¥éª¤ 0: æ£€å‡ºä»£ç ï¼Œç¡®ä¿èƒ½è®¿é—®åˆ°é™„ä»¶æ–‡ä»¶
    - name: 0. æ£€å‡ºä»“åº“ä»£ç 
      uses: actions/checkout@v4

    # æ­¥éª¤ 1: å‘é€é‚®ä»¶ (å¸¦é™„ä»¶)
    - name: 1. å‘é€é‚®ä»¶
      uses: dawidd6/action-send-mail@v3
      with:
        # SMTP æœåŠ¡å™¨é…ç½®
        server_address: ${{ secrets.SMTP_HOST }}
        server_port: ${{ secrets.SMTP_PORT }}
        username: ${{ secrets.SMTP_USERNAME }}
        password: ${{ secrets.SMTP_PASSWORD }} 

        # é‚®ä»¶å†…å®¹é…ç½®
        subject: ${{ github.event.inputs.email_subject }}
        to: ${{ github.event.inputs.recipient_email }}
        from: GitHub Actions <${{ secrets.SMTP_USERNAME }}> 
        body: ${{ github.event.inputs.email_body }}
        
        # æ·»åŠ é™„ä»¶åŠŸèƒ½
        attachments: ${{ github.event.inputs.attachment_path }}
